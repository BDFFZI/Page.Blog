---
categories:
  - 1. 学习
  - 数学
---
# 点乘（内积,标量积）
```
in float3 A,B;
out float w;
```
## 几何意义
- Dot(A,B) > 0 ：a和b同向，夹角为0-90
- Dot(A,B) = 0 ：a和b相互垂直
- Dot(A,B) < 0 ：a和b反向，夹角为90-180
## 计算方式（由余弦定理推导得出）
```
w = Dot(A,B);//A和B的顺序可以互换
//代数角度
w = A.x * B.x + 
    A.y * B.y + 
    A.z * B.z;
//几何角度
float Θ；//设Θ为A和B的夹角
w = |A| * |B| * Cos(Θ)
```
## 运算规则
- 对加减符合分配律
```
w = Dot(A + B,C);
w = (A.x + B.x) * C.x + 
    (A.y + B.y) * C.y +
    (A.z + B.z) * C.z;
w = A.x * C.x + B.x * C.x +
    A.y * C.y + B.y * C.y +
    A.z * C.z + B.z * C.z;
w = Dot(A,C) + Dot(B,C);
```
- 对乘除不符合分配律,但乘除数可以提取出来
```
float T;//用于乘除的系数
w = Dot(A * T,C);
w = A.x * T * C.x +
    A.y * T * C.y + 
    A.z * T * C.z;
w = (A.x * C.x + A.y * C.y + A.z * C.z) * T
w = Dot(A,C) * T;
```
# 叉乘（外积，向量积）
```
in float3 A,B;
out float3 w;
```
## 几何意义
- 计算与A和B相垂直向量w。
- w的模长等于以A，B为临边的四边形面积。
- 伸出手，掌心对准A和B的夹角，手掌应能通过弯曲模拟A旋转到B的状态，此时大拇指为旋转轴，同时也便是叉乘出的新向量。
## 计算方式
$
w = Cross(A,B) \\
w = \begin{vmatrix}
X & Y & Z \\
Ax & Ay & Az \\
Bx & By & Bz
\end{vmatrix}(X,Y,Z分别为三维空间的三个基向量)\\
w =
X(-1)^{1+1}\begin{vmatrix}Ay&Az\\By&Bz\end{vmatrix}+
Y(-1)^{1+2}\begin{vmatrix}Ax&Az\\Bx&Bz\end{vmatrix}+
Z(-1)^{1+3}\begin{vmatrix}Ax&Ay\\Bx&By\end{vmatrix}\\
w = X(AyBz - AzBy) + Y(AzBx - AxBz) + Z(AxBy - AyBx),
$
```
float Θ;//A和B的夹角
|w| = |A| * |B| * Sin(Θ);
```
# 夹角
```
in float3 A,B;
out float θ;
//根据点乘公式可知
|A| * |B| * Cos(θ) = Dot(A,B);
//进一步推导可得
Cos(θ) = Dot(A,B) / (|A| * |B|);
θ = Arccos(Dot(A,B) / (|A| * |B|));
```
# 投影
```
in float3 N,V;//法向和要投影的向量
out float3 p;//投影结果

//根据点乘公式可得
|N| * |V| * Cos(θ) = Dot(N,V);
|V|Cos(θ) = Dot(N,V) / |N|;
//由此可得投影后向量的长度
float pL = Dot(N,V) / |N|;
//再乘以法向得出投影点
p = pL * Normalize(N);
p = Dot(N,V) / |N| * Normalize(N);
p = Dot(N,V) * 1/|N| * N/|N|;
p = Dot(N,V) * N / Dot(N);
```