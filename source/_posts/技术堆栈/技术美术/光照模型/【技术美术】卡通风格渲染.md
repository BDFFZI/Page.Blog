---
categories:
  - 个人研究
  - 技术美术
  - 光照模拟
abbrlink: 3
---

# 【技术美术】卡通风格渲染

卡通风格渲染是模仿人的手绘风格，而人的手绘也是对现实光学的模仿，所以卡通渲染的光照计算原理和PBR是一致的。但由于人力有限，没法非常写实（降低色阶、简化阴影），绘制时还需要打线稿辅助（描边），所以构成了一种独特的卡通风格，通常来讲它的特征如下：

1. 色阶化：颜色过渡没用现实中的精度高，所以通常会有较硬的颜色转折。
2. 明暗分离：画面具有清晰的明暗区域，且两者通常不是简单的亮度变化。
3. 非真实阴影区域：阴影区域与现实存在较大差异，因为画家会避免在特征点绘制阴影，且阴影区域更简单连续。
4. 非真实物理性质：通常不满足能量守恒，高光效果也与现实差异很大。
5. 轮廓线：卡通画一般是先画线稿再上色，也因此在后来构成了一种独特的轮廓线风格。

## 色阶化

反光受两种参数影响，物体本身的反照率、相对灯光的辐射率，故两者都需要考虑色阶化。

### 反照率色阶化

不需要专门实现，因为卡通渲染中的反照率贴图本身就是卡通化的（色阶化）。

### 辐射率色阶化

由于反照率本身一般就是色阶化的，所以不建议对作为系数的辐射率进行高度明显的色阶化处理。不过辐射率可用于区分明暗部，通常卡通渲染只会有一两个暗部，所以专门针对明暗区间进行色阶化即可。所以直接夹紧辐射率的0-1区间即可，这样会产生一个明显的明暗分界线。

### 高光色阶化

高光系数也需要色阶化，故高光边缘不能太柔和。建议直接用 Blinn，这个相比 GGX 更卡通，而且可以将次数和系数计算拆开，便于实现 LUT 重映射。

## 明暗分离

卡通渲染中，灯光衰减不是线性的，存在明显的明部和暗部两个区域。由于灯光是实时的，所以明部和暗部必须拆分处理。

### 明部

卡通渲染中反照率贴图默认就是基于明部的，所以明部不需要专门处理，直接混合上色阶化后的辐射率就行。

### 暗部

暗部也可以由画家来绘制贴图，但更简单的做法是利用明部计算暗部颜色。最简单的可以直接给明部乘一个纯色，或者提供一个梯度渐变，这样产生的暗部效果更好，自由度更高。

## 非真实阴影区域

字面意思，不要用模型默认计算的法线，建模时利用法线映射，将凹凸区域也搞成平滑的法线。

## 轮廓线

实现方法很多，不多说。

## 实现概述

1. “色阶化”和“明暗分离”统一用LUT进行辐射率重映射即可实现。
2. “非真实阴影区域”在建模时专门处理一下法线即可。
3. “轮廓线”就是加个描边特效。
