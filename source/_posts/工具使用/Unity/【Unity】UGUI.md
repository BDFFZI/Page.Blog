---
categories:
  - 工具使用
  - Unity
---
# 【Unity】UGUI

## 原理

- UGUI 基于网格渲染，图片文字等都是网格，由程序在运行时生成。
- 当一个 UI 的布局或材质等信息改变时会触发重新构建，重构分为布局和渲染两类分别对应两个重构队列，UGUI 每帧会处理这些队列。
- 由于 UGUI 基于网格渲染，所以同样支持批处理，UGUI 会自动将可合并的小网格合并为大网格，可同时渲染时会自动合批。

## 优化

根据合批性质要尽可能减少 UGUI 重新计算批处理队列的次数。

- 使用图集功能将多张小图合成一张大图，使 UI 支持批处理。
- 减少修改 UI 布局和内容从而减少重构批处理的次数。
- 利用子画布功能实现动静分类，减少重建批处理网格的次数。
- 把可合批 UI 按顺序放一起使 UGUI 能处理，否则夹杂着其他 UI 会导致合批失败。
